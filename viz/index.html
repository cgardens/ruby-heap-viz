<html>
  <head>
    <title>Heap Viz</title>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="jquery.min.js"></script>
    <script src="reactive.js"></script>
    <script src="heap-viz.js"></script>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <table id="var-table">
      <thead>
        <tr>
          <th class="var-name">Variable
          <th class="var-ref">Reference
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <svg></svg>
  </body>

  <script>
  $(function ()  {
    window.viz = new HeapVisualization();
    var socket = new WebSocket('ws://localhost:8080');

    socket.onmessage = function(event) {
      viz.objData(JSON.parse(event.data));
    };
    socket.onopen = function(event) {
      console.log('Connected to Heap Viz at', event.target.url)
    };
    socket.onerror = function(error) {
      console.warn('WebSocket Error:' , error);
    };
  });
  </script>
</html>
